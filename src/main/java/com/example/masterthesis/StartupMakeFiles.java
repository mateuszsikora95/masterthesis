package com.example.masterthesis;


import org.springframework.boot.context.event.ApplicationReadyEvent;
import org.springframework.context.ApplicationListener;
import org.springframework.core.io.ClassPathResource;
import org.springframework.core.io.Resource;
import org.springframework.stereotype.Component;

import java.io.BufferedWriter;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.List;
import java.util.Set;

@Component
public class StartupMakeFiles implements ApplicationListener<ApplicationReadyEvent> {

    private static String rootDirectory;
    Set<String> directories = Set.of("abashed", "sense", "perfect", "place", "smash",
    "impolite", "pest", "poison", "wrap", "communicate",
    "beautiful", "finicky");
    Set<String> files = Set.of(
    "abashed", "sense", "place", "smash",
    "impolite", "pest", "communicate",
    "beautiful", "finicky", "quirky", "puffy", "zipper",
    "command", "clear", "representative", "limping", "gaze",
    "mellow", "burst", "beds", "wall", "rub", "improve",
    "huge", "expand", "fresh", "applaud", "car", "hydrant",
    "encouraging", "point", "stranger", "discussion", "oafish",
    "analyse", "burn", "quiet", "turn", "heat",
    "efficient", "cumbersome", "experience", "things", "gratis",
    "force", "brush", "porter", "produce", "steep", "tidy",
    "actually", "loutish", "passenger", "load",  "stupid",
    "rotten", "suffer", "maddening", "zoom", "fluttering",
    "advertisement", "gray", "greet", "harbor", "girl",
    "ethereal", "arrogant", "happy", "describe", "orange",
    "slip", "drab", "craven", "wobble", "food", "unwieldy",
    "muddled", "overwrought", "nasty", "retire",
    "hesitant", "attack", "intelligent", "train",
    "flood" , "end", "reduce", "crackpot", "run", "pasture",
    "crevice", "test", "robot", "hay", "fear", "industry",
    "pause", "habit", "faint", "suitcase", "systematic", "steak",
    "application", "edition", "aid", "leash", "extinct",
    "think", "charge", "pleasant", "excess", "twin", "still",
    "reproduce", "correction", "wrestle", "answer", "voucher", "way", "battlefield",
    "moral", "dialect", "concert", "restaurant", "archive", "majority",
    "stubborn", "judge", "clearance", "road", "bush", "instrument",
    "comment", "development", "wine", "rest", "parade", "harsh", "pool",
    "winter", "drum", "feminine", "swing", "elaborate", "council", "bubble", "float",
    "love", "commemorate", "designer", "arrest", "contract", "escape", "slap",
    "sweat",
    "crop",
    "competition",
    "difference",
    "wealth",

    "survivor",
    "score",
    "ample",
    "affinity",
    "bounce",
    "security",
    "deteriorate",
    "axis",
    "rumor",
    "singer",
    "bundle",
    "put",

    "hurt",
    "cylinder",
    "guitar",
    "qualify",
    "password",
    "identity",

    "missile",
    "tenant",
    "federation",
    "fate",

    "chin",
    "broccoli",
    "bean",
    "veil",
    "wood",
    "digital",
    "strength",
    "hobby",
    "cunning",
    "abolish",
    "pony",
    "revoke",
    "squeeze",
    "girlfriend",
    "financial",
    "cheque",
    "elephant",
    "criticism",
    "value",
    "responsible",
    "settle",
    "growth",
    "outlet",
    "snail",
    "tiptoe",
    "healthy",
    "save",
    "racism",
    "demonstration",
    "conspiracy",
    "deprive",
    "sugar",
    "dead",
    "engineer",
    "galaxy",
    "tolerate",
    "sigh",
    "aloof",
    "greeting",
    "board",
    "flesh",
    "wing",
    "banquet",
    "frank",
    "software",
    "fluctuation",
    "drink",
    "art",
    "access",
    "lump",
    "priority",
    "grief",
    "dull",
    "harvest",
    "cross",
    "instal",
    "mass",
    "foot",
    "situation",
    "bargain",
    "ideal",
    "helpless",
    "soar",
    "range",
    "loyalty",
    "wire",
    "convulsion",
    "subject",
    "eat",
    "committee",
    "finance",
    "crime",
    "endorse",
    "parking",
    "problem",
    "scatter",
    "runner",
    "death",
    "engagement",
    "desert",
    "tribe",
    "sustain",
    "fold",
    "calf",
    "side",
    "irony",
    "slow",
    "directory",
    "maze",
    "expose",
    "clock",
    "autonomy",
    "prince",
    "example",
    "shift",
    "hole",
    "give",
    "fragment",
    "truck",
    "contemporary",
    "body",
    "decisive",
    "paralyzed",
    "ribbon",
    "baseball",
    "treaty",
    "transform",
    "relevance",
    "bite",
    "overwhelm",
    "correspond",
    "humanity",
    "season",
    "cattle",
    "insistence",
    "finger",
    "salad",
    "safari",
    "onion",
    "plagiarize",
    "professor",
    "multimedia",
    "nap",
    "agent",
    "lean",
    "exclusive",
    "means",
    "ash",
    "cassette",
    "suggest",
    "tail",
    "wrist",
    "commission",
    "unlike",
    "fur",
    "decline",
    "fire",
    "complex",
    "analysis",
    "deck",
    "earwax",
    "scan",
    "rotate",
    "final",
    "chop",
    "seasonal",
    "tumour",
    "arrange",
    "dawn",
    "seize",
    "salon",
    "sail",
    "norm",
    "dominant",
    "ticket",
    "bowel",
    "deal",
    "equal",
    "conviction",
    "ethics",
    "pottery",
    "fast",
    "job",
    "limit",
    "strap",
    "narrow",
    "radical",
    "diplomatic",
    "face",
    "organ",
    "bin",
    "idea",
    "jump",
    "category",
    "detail",
    "golf",
    "clarify",
    "director",
    "opponent",
    "sphere",
    "pocket",
    "string",
    "delicate",
    "dangerous",
    "crown",
    "reason",
    "chauvinist",
    "heaven",
    "marine",
    "shatter",
    "auditor",
    "roll",
    "castle",
    "ice",
    "tower",
    "purpose",
    "appendix",
    "order",
    "failure",
    "permanent",
    "bad",
    "laser",
    "champagne",
    "drag",
    "sale",
    "moving",
    "carve",
    "testify",
    "mushroom",
    "smart",
    "wedding",
    "polish",
    "rubbish",
    "offend",
    "pass",
    "repetition",
    "grandfather",
    "choose",
    "nut",
    "undress",
    "communist",
    "collar",
    "novel",
    "asylum",
    "squash",
    "figure",
    "say",
    "sweet",
    "construct",
    "fibre",
    "structure",
    "jacket",
    "reporter",
    "population",
    "care",
    "weapon",

    "executive",
    "shed",
    "disability",
    "retreat",
    "hospitality",
    "texture",
    "national",
    "registration",
    "sanctuary",
    "plot",
    "advocate",
    "vein",
    "ex",
    "reptile",
    "baby",
    "bare",
    "whisper",
    "eaux",
    "petty",
    "rocket",
    "stir",
    "appoint",
    "journal",
    "stun",
    "glare",
    "object",
    "nominate",
    "demonstrator",
    "plan",
    "glory",
    "album",
    "surround",
    "rib",
    "queue",
    "area",
    "element",
    "combination",
    "infect",
    "imagine",
    "favorable",
    "honest",
    "sample",
    "remind",
    "eject",
    "certain",
    "medicine",
    "court",
    "compete",
    "bitch",
    "tourist",
    "exile",
    "prescription",
    "abbey",
    "magazine",
    "bland",
    "gravel",
    "merchant",
    "revise",
    "kick",
    "admission",
    "bear",
    "cooperation",
    "debate",
    "oven",
    "credit",
    "inappropriate",
    "history",
    "fabricate",
    "roar",
    "linear",
    "extent",
    "minute",
    "stable",
    "frozen",
    "division",
    "braid",
    "decay",
    "minimize",
    "hypnothize",
    "electron",
    "solution",
    "education",
    "toast",
    "labour",
    "reverse",
    "original",
    "estimate",
    "discrimination",
    "bold",
    "report",
    "communication",
    "emphasis",
    "entertainment",
    "theory",
    "cast",
    "disposition",
    "lack",
    "temptation",
    "tribute",
    "cater",
    "stretch",
    "constant",
    "nun",
    "issue",
    "diameter",
    "passion",
    "undertake",
    "photocopy",
    "dependence",
    "number",
    "introduction",
    "movement",
    "refuse",
    "land",
    "declaration",
    "berry",
    "cheat",
    "rider",
    "add",
    "take",
    "depart",
    "initial",
    "drive",
    "control",
    "talented",
    "powder",
    "church",
    "filter",
    "childish",
    "orchestra",
    "tropical",
    "expression",
    "reform",
    "bridge",
    "personality",
    "surface",
    "quantity",
    "outer",
    "doctor",
    "match",
    "sip",
    "system",
    "accent",
    "vehicle",
    "sin",
    "fair",
    "social",
    "partnership",
    "reaction",
    "kinship",
    "secretary",
    "arch",
    "trace",
    "flawed",
    "rainbow",
    "expect",
    "glasses",
    "sit",
    "mainstream",
    "coat",
    "cow",
    "daughter",
    "clean",
    "wisecrack",
    "breakdown",
    "campaign",
    "orbit",
    "voice",
    "lesson",
    "ceremony",
    "ivory",
    "bring",
    "unfortunate",
    "ministry",
    "siege",
    "pyramid",
    "miss",
    "east",
    "ballet",
    "climate",
    "respect",
    "breast",
    "apparatus",
    "bow",
    "screw",
    "sickness",
    "legislature",
    "agency",
    "connection",
    "coup",
    "find",
    "aisle",
    "digress",
    "announcement",
    "confusion",
    "choke",
    "layer",
    "student",
    "settlement",
    "differ",
    "exit",
    "morsel",
    "blue",
    "throne",
    "old",
    "legislation",
    "win",
    "salvation",
    "appeal",
    "talk",
    "chart",
    "quarrel",
    "die",
    "condition",
    "leg",
    "separation",
    "sensitive",
    "hell",
    "expertise",
    "blank",
    "reserve",
    "bloody",
    "will",
    "community",
    "glimpse",
    "variant",
    "battle",
    "stream",
    "real",
    "overlook",
    "jury",
    "misplace",
    "knee",
    "bedroom",
    "homosexual",
    "opposite ",
    "in",
    "set",
    "coalition",
    "society",
    "stall",
    "dark",
    "wait",
    "guide",
    "different",
    "memory",
    "promote",
    "closed",
    "sunrise",
    "quaint",
    "spring",
    "socialist",
    "formal",
    "goal",
    "fashionable",
    "fine",
    "sequence",
    "lily",
    "association",
    "copy",
    "willpower",
    "member",
    "cathedral",
    "cotton",
    "favourite",
    "ceiling",
    "long",
    "ridge",
    "oral",
    "virgin",
    "scratch",
    "shave",
    "climb",
    "laundry",
    "root",
    "frequency",
    "shame",
    "general",
    "health",
    "expansion",
    "architecture",
    "employ",
    "critic",
    "pillow",
    "team",
    "toss",
    "introduce",
    "execution",
    "cottage",
    "snub",
    "update",
    "infinite",
    "twist",
    "parallel",
    "discovery",
    "relative",
    "integration",
    "chair",
    "lie",
    "celebration",
    "audience",
    "define",
    "conference",
    "outfit",
    "resist",
    "grave",
    "behead",
    "evoke",
    "rabbit",
    "march",
    "investment",
    "prisoner",
    "happen",
    "descent",
    "addicted",
    "assault",
    "venture",
    "compensation",
    "initiative",
    "hotdog",
    "mature",
    "work",
    "catalogue",
    "judgment",
    "origin",
    "tired",
    "country",
    "unlawful",
    "detector",
    "demand",
    "comedy",
    "river",
    "vegetation",
    "ghost",
    "obscure",
    "misery",
    "shake",
    "vegetarian",
    "wreck",
    "scramble",
    "shoot",
    "brink",
    "central",
    "half",
    "tip",
    "practical",
    "terrace",
    "pastel",
    "tolerant",
    "democratic",
    "guess",
    "tradition",
    "cover",
    "sea",
    "deer",
    "spit",
    "marble",
    "variable",
    "specimen",
    "dimension",
    "fraction",
    "brilliance",
    "mole",
    "attention",
    "square",
    "shelter",
    "warn",
    "behave",
    "accident",
    "drawer",
    "pound",
    "referee",
    "coach",
    "injury",
    "pay",
    "Sunday",
    "bar",
    "rush",
    "linen",
    "therapist",
    "check",
    "circulation",
    "complete",
    "nest",
    "trolley",
    "grind",
    "econobox",
    "advertise",
    "estate",
    "requirement",
    "quota",
    "clue",
    "urine",
    "blow",
    "heir",
    "landscape",
    "technology",
    "extraterrestrial",
    "approach",
    "delay",
    "dip",
    "kid",
    "metal",
    "lost",
    "power",
    "pitch",
    "promise",
    "deprivation",
    "environmental",
    "horizon",
    "silk",
    "provide",
    "pier",
    "border",
    "football",
    "dry",
    "neck",
    "round",
    "welfare",
    "acceptable",
    "position",
    "thesis",
    "jungle",
    "trail",
    "dream",
    "fascinate",
    "gas",
    "dilute",
    "experiment",
    "underline",
    "waste",
    "patrol",
    "ladder",
    "litigation",
    "breeze",
    "time",
    "stab",
    "concern",
    "class",
    "information",
    "jaw",
    "loot",
    "heavy",
    "boy",
    "negative",
    "wrap",
    "ritual",
    "vision",
    "spell",
    "tire",
    "allowance",
    "slogan",
    "wording",
    "see",
    "hypothesis",
    "equinox",
    "prefer",
    "context",
    "pen",
    "folk",
    "researcher",
    "assignment",
    "jockey",
    "protect",
    "couple",
    "isolation",
    "spill",
    "mood",
    "gown",
    "dose",
    "grant",
    "pull",
    "pace",
    "kidney",
    "manage",
    "egg",
    "AIDS",
    "represent",
    "market",
    "leak",
    "ethnic",
    "site",
    "count",
    "economic",
    "start",
    "triangle",
    "cord",
    "drop",
    "birthday",
    "horse",
    "palm",
    "palace",
    "honor",
    "advance",
    "attitude",
    "recovery",
    "role",
    "mask",
    "weave",
    "garlic",
    "kidnap",
    "ready",
    "left",
    "productive",
    "thank",
    "feature",
    "trainer",
    "miner",
    "black",
    "intervention",
    "theft",
    "torch",
    "bathroom",
    "acid",
    "lay",
    "necklace",
    "panel",
    "lunch",
    "eliminate",
    "snatch",
    "mayor",
    "hostage",
    "mild",
    "mathematics",
    "print",
    "blame",
    "cope",
    "withdrawal",
    "creed",
    "energy",
    "fireplace",
    "need",
    "sharp",
    "news",
    "drug",
    "detective",
    "visit",
    "forestry",
    "prestige",
    "revolution",
    "meat",
    "nonremittal",
    "leave",
    "absorb",
    "assumption",
    "please",
    "cage",
    "elbow",
    "administration",
    "recover",
    "shadow",
    "offspring",
    "hand",
    "bag",
    "party",
    "head",
    "city",
    "mix",
    "waterfall",
    "economist",
    "tool",
    "agony",
    "gold",
    "distort",
    "story",
    "redundancy",
    "stick",
    "jewel",
    "pawn",
    "film",
    "minority",
    "enhance",
    "delete",
    "despise",
    "coast",
    "distribute",
    "global",
    "lease",
    "creep",
    "widen",
    "realize",
    "prospect",
    "button",
    "notorious",
    "distortion",
    "recording",
    "continental",
    "mean",
    "dough",
    "fog",
    "distinct",
    "sentence",
    "cabin",
    "fraud",
    "deserve",
    "green",
    "academy",
    "assume",
    "mourning",
    "continuous",
    "definite",
    "plug",
    "ban",
    "training",
    "visual",
    "flow",
    "jelly",
    "tread",
    "impound",
    "reinforce",
    "pledge",
    "absence",
    "finished",
    "flavor",
    "wake",
    "heroin",
    "motivation",
    "premium",
    "hero",
    "payment",
    "recruit",
    "field",
    "effort",
    "knowledge",
    "pour",
    "recommend",

    "dialogue",
    "deter",
    "victory",
    "width",
    "sight",
    "routine",
    "punch",
    "enthusiasm",
    "farewell",
    "hall",
    "orgy",
    "trustee",
    "firm",
    "precede",
    "favour",
    "aspect",
    "revive",
    "decade",
    "exceed",
    "attachment",
    "ward",
    "basket",
    "far",
    "lock",
    "beach",
    "publish",
    "guarantee",
    "chapter",
    "sermon",
    "peak",
    "foster",
    "grounds",
    "shallow",
    "expectation",
    "gaffe",
    "export",
    "tract",
    "blade",
    "tone",
    "retirement",
    "ask",
    "pierce",
    "meet",
    "angel",
    "lemon",
    "century",
    "consumption",
    "grand",
    "bacon",
    "fuss",
    "defeat",
    "cutting",
    "strict",
    "analyst",
    "hour",
    "qualification",
    "carriage",
    "lot",
    "witch",
    "bomber"
    );
    private String fileContent;

    @Override
    public void onApplicationEvent(ApplicationReadyEvent applicationReadyEvent) {
try {
    fileContent = readExampleFile();
    rootDirectory = (new ClassPathResource("")).getPath() + "/test";
    if (!isFileExists()) {
Files.createDirectory(Paths.get(rootDirectory));
makeFilesInDirectory(rootDirectory + "/");
    }
} catch (URISyntaxException | IOException e) {
    e.printStackTrace();
}
    }

    private String readExampleFile() throws IOException {
Resource resource = new ClassPathResource("exampleFile.txt");
Path file = resource.getFile().toPath();
return String.join("", Files.readAllLines(file));
    }

    private void makeFilesInDirectory(String name) throws IOException {
files.forEach(x ->
{
    try {
Path path = Paths.get(name + "/" + x);
if(!path.toFile().exists()) {
    Files.createFile(path);
    BufferedWriter bufferedWriter = Files.newBufferedWriter(path);
    bufferedWriter.write(fileContent);
    bufferedWriter.flush();
}
    } catch (IOException e) {
e.printStackTrace();
    }
}
);
    }

    private void makeDirectory(String name) throws IOException {
Path dir = Paths.get(name);
if(!dir.toFile().exists()) {
    Files.createDirectory(dir);
    directories.forEach(x -> {
try {
    Files.createDirectory(Paths.get(name + "/" + x));
    makeFilesInDirectory(name + "/" + x);
} catch (IOException e) {
    e.printStackTrace();
}
    });
}
    }

    private boolean isFileExists() throws URISyntaxException {
return Paths.get(rootDirectory).toFile().exists();
    }
}
